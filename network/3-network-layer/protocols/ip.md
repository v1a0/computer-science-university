# IP - internet protocol

---

##  Функции протокола

- **IP** объединяет сегменты сети (или сети), обеспечивая доставку пакетов данных между разными узлами сетей.

- **IP** не гарантирует надёжной доставки пакетов, пакеты могут прийти в неправильном порядке, продублироваться, повредиться или не прийти.

---

## Задачи IP

- Объединение сетей;
- Марщрутизация;
- Качество обслуживания.

---

##  Формат заголовка IP-пакета

![](https://github.com/v1a0/computer-science-university/blob/main/img/ip-header.png)

1. **Номер версии** - IPv4 или IPv6;
2. **Длина заголовка** -  хранит длину обезателной части и  дополнительных опций;
3. **Тип сервиса** - используется редко;
4. **Общая длина** - длина пакета, включая заголовок и данные; 
5. **Индетификатор пакета** - задает номер пакета, который будет разбиваться на фрагменты (оно должно быть одинаково у всех частей);
6. **Флаги** - первый бит зарезервирован и не используется, DF - не фрагментировать, MF - есть еще фрагменты;
7. **Смещение фрагмента** - хранит в себе смещение фрагмента в оле данных исходного пакета;
8. **Время жизна (TTL <= 255)** - сколько маршрутизаторов может пройти данный пакет;
9. **Тип протокола верхнего уровня** - TCP, UDP, ICMP; 
10. **Контрольная сумма** - CRC-16
11. **IP-адрес отправителя**
12. **IP-адрес получателя**

----

## Маршрутизация

**Маршрутизация** - поиск маршрута доставки пакета между сетями через транзитные узлы (маршрутизаторы)

### Этапы маршрутизации

- Изучение сети;
- Продвижение пакетов на маршрутизаторе.

### Записи в таблице маршрутизации

- Статические (задаются вручную);
- Динамические (заполняются при помощи протоколов маршрутизации RIP, OSPF, BGP). 

---

## Фрагментация

**Фрагментация** - разделение пакета на несколько частей (фреймов) для передачи по сети с меленькой пропускной способностью.

***В IPv6 отказались от фрашментации на маршрутизаторах.***

---

## Маска подсети

Маска подсети показывает, где в IP-адресе номер сети, а где   хоста.

### Структура маски

- Длина 32 бита;
- Единицы в позициях, задающих номер сети;
- Нули в позициях, задающих номер хоста.

---

## Типы IP адресов

- Индивидуальный (unicast);
- Групповой (multicast);
- Широковещательный (broadcast).

---

Существует 2 версии протокола IPv4 и IPv6, 4-я и 6-я версии соответсвенно.

В протоколе IPv4 каждому узлу сети соответствует IP-адрес длиной 4 байта. (192.168.53.100) В протоколе IPv6 каждому узлу сети соответствует IP-адрес длиной 16 байта. (2001:0000:0000:0000:0000:AAAA:BBBB:CCCC)

Принадлежность адресов к общей подсети определяется по общим начальными битами адреса. Какая именно часть ip-адреса является адресом сети или подсети определяется по маске.
